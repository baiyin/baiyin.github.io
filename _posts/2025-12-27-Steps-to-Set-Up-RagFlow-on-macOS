Steps to Set Up RagFlow on macOS 

macOS Setting: Apple M3 Max, 128 GB 

1. Clone the repository and navigate to the directory

git clone https://github.com/infiniflow/ragflow.git
cd ragflow

2. Configure the .env file

Edit the docker/.env file:

vi docker/.env

	•	Configure as needed:
	•	Set the RAGFLOW_IMAGE to use a domestic (China) mirror if required.
	•	If you are using macOS, uncomment the line MACOS=1.

3. Start the services

docker compose down --volumes  # Ensure a clean start
docker compose -f docker/docker-compose.yml up -d

	•	Note: The initial startup may take several minutes, depending on the image size, network speed, and host performance.

4. Test the browser interface

	•	Open http://127.0.0.1 in your browser and check if the RagFlow login page loads successfully.

5. Troubleshoot Issue 1: Registration and login are unresponsive

	•	Check the logs of the ragflow-server container:

docker logs -f ragflow-server

	•	If you encounter a ModuleNotFoundError indicating that polars is missing:
	•	Enter the container and install polars-lts-cpu:

docker exec -it ragflow-server /bin/bash
pip install polars-lts-cpu
exit
docker restart ragflow-server

	•	Retest registration and login functionality.

6. Troubleshoot Issue 2: Errors related to Elasticsearch (ES01) missing during chat

	•	Check the status of the ragflow-es-01 container:

docker ps
docker logs -f ragflow-es-01

	•	If the container is exiting due to insufficient memory (Exit Code 137):
	•	Open Docker Desktop Settings:
	•	Increase the memory allocation to 16GB (at least 4GB minimum).
	•	Restart all RagFlow-related services.

7. Verify if the services are functioning correctly

	•	Check the logs for both ragflow-server and ragflow-es-01 containers to ensure there are no errors:

docker logs -f ragflow-server
docker logs -f ragflow-es-01

	•	Test the following in your browser:
	•	Registration
	•	Login
	•	Uploading data
	•	Chat functionality

This translation maintains all technical details and provides a clear, step-by-step guide in English. Let me know if you need further adjustments!
